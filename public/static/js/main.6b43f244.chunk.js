(window["webpackJsonploftschool-nodejs-project"]=window["webpackJsonploftschool-nodejs-project"]||[]).push([[0],{195:function(e,t,a){e.exports=a(331)},249:function(e,t){},331:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(11),i=a.n(o),s=a(17),l=a(14),u=a(18),m=a(19),d=a(20),p=a(55),f=a(8),h=a(166),b=a.n(h),g=a(6),E=a(117),O=a(398),v=a(25),j=a(167),w=a.n(j),y=a(21),N=a(397),x=Object(N.a)({OPEN_NOTIFICATION:function(e){return e},CLOSE_NOTIFICATION:function(e){return e}},{prefix:"notifications"}),S=x.openNotification,C=x.closeNotification,T=function(e){return e.notifications},k=Object(O.a)((n={},Object(g.a)(n,S,function(e,t){var a=t.payload,n=a.text,r=a.variant;return[].concat(Object(y.a)(e),[{text:n,variant:r,id:e.length+1,isActive:!e.length}])}),Object(g.a)(n,C,function(e,t){var a=e.filter(function(e){return e.id!==t.payload});return a.length?a.map(function(e,t){return t===a.length-1&&(e.isActive=!0),e}):a}),n),[]);console.log("FRONT REQUEST PORT = ",Object({NODE_ENV:"production",PUBLIC_URL:""}).PORT),console.log("FRONT REQUEST PORT = ",Object({NODE_ENV:"production",PUBLIC_URL:""})),console.log("FRONT REQUEST PORT = ",window.location);var P,A,R,_=w.a.create({baseURL:"https://microlabig.herokuapp.com/api/"}),I=[],D=!1,L=function(e){var t=e.url,a=e.method,n=e.data,r=e.headers,c=void 0===r?{}:r,o=e.isRefresh,i=e.isWithoutToken,s=e.getState,l=void 0===s?function(){return{}}:s,u=e.dispatch,m=void 0===u?function(){}:u;return new Promise(function(e,r){var s=H(l()),u=s.accessToken,d=s.accessTokenExpiredAt,p=s.refreshTokenExpiredAt,f=function(e){var t=e.url,a=e.method,n=e.headers,r=e.data,c=e.resolve,s=e.reject;if(!i){var u=H(l()),d=u.accessToken,p=u.refreshToken;n.Authorization=o?p:d}return _({url:t,method:a,headers:n,data:r}).then(function(e){c(e.data)}).catch(function(e){if(!e.response)return m(S({variant:"error",text:"Error!!\n".concat(e.message)})),s(e.message);var a=e.response.status||404,n=e.response.data;switch(console.group("Error from: "+t),console.info("Status: "+a),console.dir(n),console.groupEnd(),a){case 401:case 403:return m(ee()),s(n);case 500:case 502:case 503:return m(S({variant:"error",text:"".concat(a,"!\nSomething is wrong))")})),s({detail:"Unknown error"});default:return s(n)}})},h=d<=Date.now(),b=p<=Date.now();u&&h&&!b&&!i?(!o&&I.push({url:t,method:a,data:n,headers:c,isRefresh:o,resolve:e,reject:r}),o||D?o&&f({url:t,method:a,data:n,headers:c,resolve:e,reject:r}):(D=!0,m($()).then(function(){D=!1,I.forEach(function(e){return f(e)})}).catch(function(){m(ee()),r({detail:"Refresh token error"})}))):b&&!i?(m(ee()),r({detail:"Refresh token is expired"})):f({url:t,method:a,data:n,headers:c,resolve:e,reject:r})})},U=function(e){return e.auth.userProfile},F=function(e){return e.auth.permissions},H=function(e){return e.auth.tokens},W=function(e){return!!e.auth.tokens.accessToken},M=function(e){return e.auth.isLoadingUserProfile},B=(Object(E.a)("".concat("AUTH","/LOGIN_USER_REQUEST")),Object(E.a)("".concat("AUTH","/REGISTRATION_USER_REQUEST")),Object(E.a)("".concat("AUTH","/SET_PROFILE_DATA"))),G=Object(E.a)("".concat("AUTH","/SET_TOKEN_DATA")),z=Object(E.a)("".concat("AUTH","/LOGOUT_USER")),q=Object(E.a)("".concat("AUTH","/SET_IS_LOADING_USER_PROFILE")),V=Object(O.a)(Object(g.a)({},q,function(e,t){return t.payload}),!1),Q=Object(O.a)((P={},Object(g.a)(P,B,function(e,t){var a=t.payload,n=a.id,r=a.image,c=a.middleName,o=a.surName,i=a.username;return{id:n,image:r,firstName:a.firstName,middleName:c,surName:o,username:i}}),Object(g.a)(P,z,function(){return null}),P),null),X={chat:{C:!1,D:!1,R:!1,U:!1},news:{C:!1,D:!1,R:!1,U:!1},settings:{C:!1,D:!1,R:!1,U:!1}},J=Object(O.a)((A={},Object(g.a)(A,B,function(e,t){return t.payload.permission}),Object(g.a)(A,z,function(){return X}),A),X),Z=Object(O.a)((R={},Object(g.a)(R,G,function(e,t){var a=t.payload;return{accessToken:a.accessToken,accessTokenExpiredAt:a.accessTokenExpiredAt,refreshToken:a.refreshToken,refreshTokenExpiredAt:a.refreshTokenExpiredAt}}),Object(g.a)(R,z,function(){return{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}}),R),{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}),Y=Object(v.c)({userProfile:Q,permissions:J,tokens:Z,isLoadingUserProfile:V}),K=function(){return function(e,t){var a=localStorage.getItem("token-data");a&&(e(G(JSON.parse(a))),L({url:"/profile",method:"GET",dispatch:e,getState:t}).then(function(t){e(B(t))}).catch(function(e){}))}},$=function(){return function(e,t){return new Promise(function(a,n){L({url:"/refresh-token",method:"POST",isRefresh:!0,dispatch:e,getState:t}).then(function(t){e(G(t)),a(a)}).catch(function(e){return n(e)})})}},ee=function(){return function(e){localStorage.removeItem("token-data"),e(z()),S({text:"\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",variant:"info"})}},te=function(e){var t=e.firstName,a=e.surName,n=e.middleName,r=e.oldPassword,c=e.newPassword,o=e.avatar;return function(e,i){return new Promise(function(s){var l=new FormData;l.append("firstName",t),l.append("surName",a),l.append("middleName",n),l.append("oldPassword",r),l.append("newPassword",c),l.append("avatar",o),e(q(!0)),L({url:"/profile",method:"PATCH",data:l,getState:i,dispatch:e}).then(function(t){e(B(t)),e(S({text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d!",variant:"success"})),s(!0)}).catch(function(t){return e(S({text:t.message,variant:"error"}))}).finally(function(){return e(q(!1))})})}},ae={home:"/",registration:"/registration",news:"/news",chat:"/chat",profile:"/profile",adminPanel:"/admin-panel"},ne=Object(f.b)(function(e){return{permissions:F(e),isAuthorized:W(e)}})(function(e){var t=e.permissionPath,a=e.path,n=e.component,r=e.permissions;return!e.isAuthorized||t&&!b.a.get(r,[t,"R"],!1)?c.a.createElement(p.a,{from:a,to:ae.home}):c.a.createElement(p.b,{path:a,component:n})}),re=a(13),ce=a(4),oe=a(395),ie=a(366),se=a(367),le=a(368),ue=a(27),me=a(364),de=c.a.forwardRef(function(e,t){return c.a.createElement(ue.b,Object.assign({innerRef:t},e))}),pe=Object(p.g)(function(e){var t=e.path,a=e.location,n=e.children,r=e.isRouterLink,o=e.color,i=void 0===o?"primary":o;return c.a.createElement(me.a,{color:r?a.pathname===t?i:"default":i,component:de,to:t},n)}),fe=a(31),he=a.n(fe),be=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"renderAuthorizedNav",value:function(){var e=this.props,t=e.permissions,a=e.profile;return c.a.createElement(c.a.Fragment,null,he()(t,"news.R",!1)&&c.a.createElement(pe,{path:ae.news,isRouterLink:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),he()(t,"chat.R",!1)&&c.a.createElement(pe,{path:ae.chat,isRouterLink:!0},"\u0427\u0430\u0442"),he()(t,"settings.R",!1)&&c.a.createElement(pe,{path:ae.adminPanel,isRouterLink:!0},"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"),c.a.createElement(pe,{path:ae.profile,isRouterLink:!0},a?a.username:""))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return c.a.createElement("div",null,c.a.createElement(ie.a,{position:"static",color:"default",className:t.appBar},c.a.createElement(se.a,null,c.a.createElement(le.a,null,c.a.createElement("div",{className:t.logo},c.a.createElement("img",{src:"../../assets/img/logo.png",alt:"logo"})),c.a.createElement(pe,{path:ae.home,isRouterLink:!0},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),a?this.renderAuthorizedNav():null))))}}]),t}(r.PureComponent),ge=Object(re.a)(Object(ce.a)(function(){return{logo:{flexGrow:1}}}),Object(f.b)(function(e){return{isAuthorized:W(e),permissions:F(e),profile:U(e)}}))(be),Ee=a(38),Oe=a(53),ve=a(118),je=a(369),we=a(402),ye=a(370),Ne=a(371),xe=a(372),Se=Object(ce.a)(function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}})(function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,o=e.label,i=e.required;return c.a.createElement(je.a,{className:a.textField,required:i},c.a.createElement(we.a,{htmlFor:"input-"+t},o),c.a.createElement(ye.a,{id:"input-"+t,type:"text",value:r,autoComplete:t,onChange:n,startAdornment:c.a.createElement(Ne.a,{position:"start"},c.a.createElement(xe.a,null))}))}),Ce=a(374),Te=a(373),ke=a(375),Pe=a(376),Ae=a(47),Re=a.n(Ae),_e=Object(ce.a)(function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}})(function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,o=e.label,i=e.className,s=e.name,l=c.a.useState({showPassword:!1}),u=Object(Oe.a)(l,2),m=u[0],d=u[1];return c.a.createElement(je.a,{className:Re()(a.textField,i),required:!0},c.a.createElement(we.a,{htmlFor:t},o),c.a.createElement(ye.a,{id:t,autoComplete:t,type:m.showPassword?"text":"password",name:s,value:r,onChange:n,startAdornment:c.a.createElement(Ne.a,{position:"start"},c.a.createElement(Te.a,null)),endAdornment:c.a.createElement(Ne.a,{position:"end"},c.a.createElement(Ce.a,{"aria-label":"toggle password visibility",onClick:function(){d({showPassword:!m.showPassword})},onMouseDown:function(e){e.preventDefault()}},m.showPassword?c.a.createElement(ke.a,null):c.a.createElement(Pe.a,null)))}))});function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var De=Object(re.a)(Object(ce.a)(function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}}),Object(f.b)())(function(e){var t=e.classes,a=e.dispatch,n=Object(r.useState)({username:"",password:""}),o=Object(Oe.a)(n,2),i=o[0],s=o[1],l=function(e){return function(t){s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ie(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},i,Object(g.a)({},e,t.target.value)))}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(ve.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=i.username,n=i.password;a(function(e){var t=e.username,a=e.password;return function(e,n){return new Promise(function(r,c){L({url:"/login",method:"POST",data:{username:t,password:a},isWithoutToken:!0,dispatch:e,getState:n}).then(function(t){e(S({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438!",variant:"success"}));var a=t.accessToken,n=t.accessTokenExpiredAt,c=t.refreshToken,o=t.refreshTokenExpiredAt;localStorage.setItem("token-data",JSON.stringify({accessToken:a,accessTokenExpiredAt:n,refreshToken:c,refreshTokenExpiredAt:o})),e(B(t)),e(G(t)),r(t)}).catch(function(t){e(S({text:t.message,variant:"error"})),c(t)})})}}({username:t,password:n}))}},c.a.createElement(Se,{handleChange:l("username"),value:i.username,id:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),c.a.createElement(_e,{handleChange:l("password"),value:i.password,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),c.a.createElement(me.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u043e\u0439\u0442\u0438")),c.a.createElement(Ee.a,{className:Re()(t.textCenter,t.form)},"\u0412\u043f\u0435\u0440\u0432\u044b\u0435 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435? ",c.a.createElement(ue.b,{to:ae.registration},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))});function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ue,Fe,He,We,Me,Be=Object(re.a)(Object(ce.a)(function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}}),Object(f.b)(),p.g)(function(e){var t=e.classes,a=e.dispatch,n=e.history,o=Object(r.useState)({username:"",password:"",repeatPassword:"",firstname:"",lastname:"",patronicname:""}),i=Object(Oe.a)(o,2),s=i[0],l=i[1],u=function(e){return function(t){l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},s,Object(g.a)({},e,t.target.value)))}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(ve.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=s.username,r=s.password,c=s.firstname,o=s.lastname,i=s.patronicname;a(function(e){var t=e.username,a=e.password,n=e.firstname,r=e.lastname,c=e.patronicname;return function(e,o){return new Promise(function(i,s){var l={username:t,surName:r,firstName:n,middleName:c,password:a};L({url:"/registration",data:l,method:"POST",isWithoutToken:!0,dispatch:e,getState:o}).then(function(){e(S({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!",variant:"success"})),i(l)}).catch(function(t){e(S({text:t.message,variant:"error"})),s(t)})})}}({username:t,password:r,firstname:c,lastname:o,patronicname:i})).then(function(){return n.push(ae.home)}).catch(console.error)}},c.a.createElement(Se,{id:"username",handleChange:u("username"),value:s.username,label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),c.a.createElement(Se,{id:"lastname",handleChange:u("lastname"),value:s.lastname,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),c.a.createElement(Se,{id:"firstname",handleChange:u("firstname"),value:s.firstname,label:"\u0418\u043c\u044f"}),c.a.createElement(Se,{id:"patronicname",handleChange:u("patronicname"),value:s.patronicname,label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}),c.a.createElement(_e,{id:"password",handleChange:u("password"),value:s.password,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),c.a.createElement(_e,{id:"repeatPassword",handleChange:u("repeatPassword"),value:s.repeatPassword,label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}),c.a.createElement(me.a,{color:"primary",variant:"contained",type:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),c.a.createElement(Ee.a,{className:Re()(t.textCenter,t.form)},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",c.a.createElement(ue.b,{to:ae.home},"\u0412\u043e\u0439\u0442\u0438")))}),Ge=Object(re.a)(Object(ce.a)(function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"}}}),Object(f.b)())(function(e){var t=e.classes,a=e.dispatch;return c.a.createElement(ve.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault(),a(ee())}},c.a.createElement(me.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u044b\u0439\u0442\u0438"))}),ze=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return c.a.createElement("div",{className:t.wrapper},c.a.createElement(se.a,null,c.a.createElement(Ee.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u0412\u0430\u0448\u0435 \u0443\u044e\u0442\u043d\u043e\u0435",c.a.createElement("br",null),"\u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e"),a?c.a.createElement(Ge,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(p.b,{path:"/",exact:!0,component:De}),c.a.createElement(p.b,{path:"/registration",component:Be}))))}}]),t}(r.PureComponent),qe=Object(re.a)(Object(ce.a)(function(){return{wrapper:{background:'url("/assets/img/background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",paddingTop:"40px"}}}),Object(f.b)(function(e){return{isAuthorized:W(e)}}),p.g)(ze),Ve=a(334),Qe=function(e){return e.news.isLoadingNewsList},Xe=function(e){return e.news.isLoadingNewsForm},Je=function(e){return e.news.isLoaded},Ze=function(e){return e.news.news},Ye=Object(E.a)("".concat("NEWS","/SET_IS_LOADING_NEWS_LIST")),Ke=Object(E.a)("".concat("NEWS","/SET_IS_LOADING_NEWS_FORM")),$e=Object(E.a)("".concat("NEWS","/SET_NEWS_LIST")),et=Object(E.a)("".concat("NEWS","/APPEND_NEWS")),tt=Object(E.a)("".concat("NEWS","/SET_TO_ZERO_NEWS_LIST")),at=(Object(E.a)("".concat("NEWS","/SET_IS_LOADED")),Object(O.a)(Object(g.a)({},Ye,function(e,t){return t.payload}),!1)),nt=Object(O.a)(Object(g.a)({},Ke,function(e,t){return t.payload}),!1),rt=Object(O.a)(Object(g.a)({},$e,function(e,t){return!0}),!1),ct=Object(O.a)((Ue={},Object(g.a)(Ue,$e,function(e,t){return t.payload}),Object(g.a)(Ue,et,function(e,t){return[t.payload].concat(Object(y.a)(e))}),Object(g.a)(Ue,tt,function(){return[]}),Ue),[]),ot=Object(v.c)({isLoadingNewsList:at,isLoadingNewsForm:nt,isLoaded:rt,news:ct}),it=function(e){var t=e.title,a=e.text;return function(e,n){return new Promise(function(r,c){var o={title:t,text:a};e(Ke(!0)),L({url:"/news",method:"POST",data:o,getState:n,dispatch:e}).then(function(t){e($e(t)),r(t)}).catch(function(e){c(e)}).finally(function(){return e(Ke(!1))})})}},st=function(e){var t=e.id,a=e.title,n=e.text;return function(e,r){return new Promise(function(c,o){var i={title:a,text:n};e(Ke(!0)),L({url:"/news/".concat(t),method:"PATCH",data:i,getState:r,dispatch:e}).then(function(t){e($e(t)),c(t)}).catch(function(e){o(e)}).finally(function(){return e(Ke(!1))})})}},lt=a(377),ut=a(378),mt=a(379),dt=a(380),pt=a(381),ft=function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},card:{marginBottom:e.spacing(2)}}},ht=Object(Ve.a)(ft)(function(e){var t=e.classes,a=e.post,n=e.dispatch,r=e.permission,o=!!he()(r,"news.U",!1),i=!!he()(r,"news.D",!1);return c.a.createElement(lt.a,{className:t.card},c.a.createElement(ut.a,{avatar:c.a.createElement(mt.a,{"aria-label":"recipe",src:a.user.image||"/assets/img/no-user-image.png",alt:a.user.username}),title:a.title,subheader:a.created_at}),c.a.createElement(dt.a,null,c.a.createElement(Ee.a,{variant:"body2",color:"textSecondary",component:"p"},a.text)),c.a.createElement(pt.a,null,o&&c.a.createElement(pe,{path:"/news/".concat(a.id,"/edit")},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),i&&c.a.createElement(me.a,{onClick:function(){n(function(e){var t=e.id;return function(e,a){return new Promise(function(n,r){e(Ye(!0)),L({url:"/news/".concat(t),method:"DELETE",getState:a,dispatch:e}).then(function(t){e($e(t)),n(t)}).catch(function(e){r(e)}).finally(function(){return e(Ye(!1))})})}}({id:a.id}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}),bt=Object(re.a)(Object(Ve.a)(ft),Object(f.b)(function(e){return{permission:F(e)}}))(ht),gt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(e,t){Je(t())||(e(Ye(!0)),L({url:"/news",method:"GET",getState:t,dispatch:e}).then(function(t){return e($e(t))}).catch(function(e){return console.log(e)}).finally(function(){return e(Ye(!1))}))})}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.isLoaded,n=e.news,r=e.permission,o=!!he()(r,"news.C",!1);return c.a.createElement(c.a.Fragment,null,o&&c.a.createElement(pe,{color:"primary",path:"".concat(ae.news,"/add")},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),c.a.createElement("div",null,t?c.a.createElement("div",null,"Loading..."):null,a?n.length?n.map(function(e){return c.a.createElement(bt,{post:e,key:e.id})}):c.a.createElement("div",null,"\u041d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"):null))}}]),t}(r.PureComponent),Et=Object(f.b)(function(e){return{isLoading:Qe(e),isLoaded:Je(e),news:Ze(e),permission:F(e)}},null)(gt),Ot=a(382),vt=a(399),jt=a(384),wt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",text:"",createdAt:new Date,user:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(g.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.title,r=t.text,c=a.props,o=c.history,i=c.dispatch,s=c.match;i(s.params.id?st({title:n,text:r,id:s.params.id}):it({title:n,text:r})).then(function(){return o.push(ae.news)})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.newsList;if(t.params.id){var n=a.find(function(e){return e.id==t.params.id}),r=n.title,c=n.text,o=n.created_at,i=n.user;this.setState({title:r,text:c,createdAt:o,user:i.username})}}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.title,n=t.text,r=t.createdAt,o=t.user;return c.a.createElement(ve.a,{className:e.formCard,component:"form",onSubmit:this.handleSubmit},c.a.createElement(Ot.a,{container:!0,spacing:2},c.a.createElement(Ot.a,{item:!0,xs:4},c.a.createElement(vt.a,{label:"\u0410\u0432\u0442\u043e\u0440",value:o,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),c.a.createElement(vt.a,{label:"\u0414\u0430\u0442\u0430",value:r,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),c.a.createElement(vt.a,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",value:a,onChange:this.handleChange,className:e.textField,margin:"normal",fullWidth:!0})),c.a.createElement(Ot.a,{item:!0,xs:8},c.a.createElement(vt.a,{label:"\u0422\u0435\u043a\u0441\u0442",name:"text",value:n,onChange:this.handleChange,className:e.textField,margin:"normal",multiline:!0,fullWidth:!0,rows:5}),c.a.createElement(jt.a,null,c.a.createElement(me.a,{variant:"contained",color:"secondary",type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),c.a.createElement(pe,{path:"/news",variant:"contained"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))))}}]),t}(r.PureComponent),yt=Object(re.a)(Object(Ve.a)(function(e){return{formCard:{padding:e.spacing(2)},textField:{display:"block",width:"100%"}}}),p.g,Object(f.b)(function(e){return{isLoading:Xe(e),newsList:Ze(e)}},null))(wt),Nt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.classes;return c.a.createElement("div",{className:e.wrapper},c.a.createElement(se.a,null,c.a.createElement(Ee.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"),c.a.createElement(p.b,{path:"/news",exact:!0,component:Et}),c.a.createElement(p.b,{path:"/news/add",component:yt}),c.a.createElement(p.b,{path:"/news/:id/edit",component:yt})))}}]),t}(r.PureComponent),xt=Object(Ve.a)(function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"}}})(Nt),St=a(173),Ct=a.n(St),Tt=null,kt=function(e){return e.chat.users},Pt=function(e){return e.chat.messages},At=function(e){return e.chat.selectedRoom},Rt=function(e){return e.chat.messageText},_t=Object(E.a)("".concat("CHAT","/SET_USERS")),It=Object(E.a)("".concat("CHAT","/ADD_USER")),Dt=Object(E.a)("".concat("CHAT","/UPDATE_USER")),Lt=Object(E.a)("".concat("CHAT","/REMOVE_USER")),Ut=Object(E.a)("".concat("CHAT","/ADD_MESSAGE")),Ft=Object(E.a)("".concat("CHAT","/SET_ROOM_HISTORY")),Ht=Object(E.a)("".concat("CHAT","/SET_TO_ZERO_MESSAGES")),Wt=Object(E.a)("".concat("CHAT","/SET_SELECTED_ROOM")),Mt=Object(E.a)("".concat("CHAT","/SET_MESSAGE_TEXT")),Bt=Object(E.a)("".concat("CHAT","/RESET_MESSAGE")),Gt=Object(O.a)((Fe={},Object(g.a)(Fe,_t,function(e,t){return t.payload}),Object(g.a)(Fe,It,function(e,t){return[t.payload].concat(Object(y.a)(e))}),Object(g.a)(Fe,Dt,function(e,t){return e.map(function(e){return e.userId===t.payload.userId?t.payload:e})}),Object(g.a)(Fe,Lt,function(e,t){return e.filter(function(e){return e.socketId!==t.payload})}),Fe),[]),zt=Object(O.a)((He={},Object(g.a)(He,Ut,function(e,t){return[].concat(Object(y.a)(e),[t.payload])}),Object(g.a)(He,Ft,function(e,t){return t.payload}),Object(g.a)(He,Ht,function(){return[]}),He),[]),qt=Object(O.a)(Object(g.a)({},Wt,function(e,t){return t.payload}),null),Vt=Object(O.a)((We={},Object(g.a)(We,Mt,function(e,t){return t.payload}),Object(g.a)(We,Bt,function(){return""}),We),""),Qt=Object(v.c)({users:Gt,messages:zt,selectedRoom:qt,messageText:Vt}),Xt=function(){return function(e,t){var a=t(),n=U(a),r=At(a),c=Rt(a);Tt.emit("message:add",{senderId:n.id,recipientId:r.recipientId,roomId:r.socketId,text:c}),e(Bt())}},Jt=a(385),Zt=a(383),Yt=a(332),Kt=a(386),$t=Object(re.a)(Object(Ve.a)(function(e){return{column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"}}}),Object(f.b)(function(e){return{users:kt(e),selectedRoom:At(e)}}))(function(e){var t=e.classes,a=e.users,n=e.selectedRoom,r=e.dispatch,o=function(e){r(function(e){var t=e.userId,a=e.socketId;return function(e,n){var r=U(n());e(Ht()),e(Wt({recipientId:t,socketId:a})),Tt.emit("message:history",{recipientId:t,userId:r.id})}}({userId:e.userId,socketId:e.socketId}))};return c.a.createElement(ve.a,{className:t.column,square:!0},c.a.createElement(ut.a,{title:c.a.createElement(Ee.a,{variant:"h5"},"\u041b\u0438\u0447\u043d\u044b\u0435 \u0447\u0430\u0442\u044b")}),c.a.createElement(Jt.a,null),c.a.createElement(Zt.a,null,a.map(function(e,t){return c.a.createElement(Yt.a,{button:!0,key:e.userId,selected:e.userId===n&&n.userId,onClick:function(){return o(e)}},c.a.createElement(Kt.a,{primary:e.username}))})))}),ea=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){(0,a.props.dispatch)(Mt(e.target.value))},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.dispatch)(Xt())},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.messages,n=e.messageText,r=e.userId,o=e.permission,i=!!he()(o,"chat.C",!1);return c.a.createElement(c.a.Fragment,null,c.a.createElement(dt.a,{className:t.chatArea},c.a.createElement(Ot.a,{container:!0,direction:"column",wrap:"nowrap"},a.map(function(e,a){return c.a.createElement(Ot.a,{item:!0,key:a,className:Re()(t.messageContainer,e.senderId!==r?t.isMyMessage:t.isAnotherMessage)},c.a.createElement(lt.a,{className:Re()(t.message,e.senderId!==r?t.messagePrimary:t.messageSecondary)},e.text))}))),i&&c.a.createElement(pt.a,null,c.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},c.a.createElement(vt.a,{label:"Label",style:{margin:8},fullWidth:!0,margin:"normal",variant:"filled",InputLabelProps:{shrink:!0},value:n,onChange:this.handleChange}),c.a.createElement(me.a,{variant:"contained",color:"primary",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))}}]),t}(r.PureComponent),ta=Object(re.a)(Object(Ve.a)(function(e){return{messageContainer:{marginBottom:e.spacing(2)},message:{padding:e.spacing(1)},messagePrimary:{backgroundColor:e.palette.grey.A700},messageSecondary:{backgroundColor:e.palette.secondary.main},isMyMessage:{alignSelf:"end"},isAnotherMessage:{alignSelf:"flex-end"},chatArea:{height:"100%",overflowY:"scroll"},form:{display:"flex",alignItems:"center",width:"100%"}}}),Object(f.b)(function(e){return{messageText:Rt(e),userId:U(e).id,permission:F(e)}}))(ea),aa=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(e,t){var a=U(t());(Tt=Ct()("http://localhost:3030")).emit("users:connect",{userId:a.id,username:a.username}),Tt.on("users:list",function(t){return e(_t(t))}).on("users:add",function(t){return e(It(t))}).on("users:leave",function(a){e(Lt(a));var n=At(t());n&&n.socketId===a&&e(Wt(null))}).on("message:history",function(t){return e(Ft(t))}).on("message:add",function(t){return e(Ut(t))})})}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(function(e){Tt&&Tt.disconnect(),e(_t([])),e(Ht()),e(Wt(null)),e(Bt())})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=e.messages,r=e.selectedRoom;return c.a.createElement("div",{className:t.wrapper},c.a.createElement(se.a,null,c.a.createElement(Ot.a,{container:!0,spacing:1},c.a.createElement(Ot.a,{item:!0,xs:4},c.a.createElement($t,{users:a,selected:r})),c.a.createElement(Ot.a,{item:!0,xs:8},c.a.createElement(lt.a,{className:t.column,square:!0},r?c.a.createElement(ta,{messages:n}):c.a.createElement("div",{className:t.empty},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442"))))))}}]),t}(r.PureComponent),na=Object(re.a)(Object(Ve.a)(function(e){return{toolbar:e.mixins.toolbar,column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"},wrapper:{width:"100%",flex:"1 1 100%",paddingTop:e.spacing(1)},empty:{padding:e.spacing(3)}}}),Object(f.b)(function(e){return{users:kt(e),selectedRoom:At(e),messages:Pt(e)}}))(aa),ra=a(174),ca=a.n(ra),oa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",middleName:"",surName:"",oldPassword:"",newPassword:"",confirmPassword:"",image:"",fileRef:c.a.createRef()},a.cancelHandler=function(){var e=a.props.userProfile;a.setState({firstName:e.firstName,middleName:e.middleName,surName:e.surName,oldPassword:"",newPassword:"",confirmPassword:"",image:e.image})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(g.a)({},n,r))},a.handleChangeFile=function(){var e=a.state.fileRef,t=new FileReader;t.onload=function(e){a.setState({image:e.target.result})},e.current.files[0]&&t.readAsDataURL(e.current.files[0])},a.submitHandler=function(){var e=a.props.dispatch,t=a.state,n=t.firstName,r=t.surName,c=t.middleName,o=t.oldPassword,i=t.newPassword,s=t.fileRef;e(te({firstName:n,surName:r,middleName:c,oldPassword:o,newPassword:i,avatar:s.current.files[0]||null})).then(function(){a.cancelHandler()})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.userProfile;this.setState({firstName:e.firstName,middleName:e.middleName,surName:e.surName,image:e.image})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isLoading,n=this.state,r=n.firstName,o=n.surName,i=n.middleName,s=n.oldPassword,l=n.newPassword,u=n.confirmPassword,m=n.image,d=n.fileRef;return c.a.createElement("div",{className:t.wrapper},c.a.createElement(se.a,null,c.a.createElement(ve.a,{className:t.formCard},c.a.createElement(Ot.a,{container:!0,spacing:2},c.a.createElement(Ot.a,{item:!0,xs:4},c.a.createElement(ca.a,{className:t.avatarPreviewWrapper},c.a.createElement(mt.a,{className:t.avatarPreview,src:m||"/assets/img/no-user-image-big.png"})),c.a.createElement(me.a,{className:t.uploadButton,variant:"contained",component:"label",color:"primary"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",c.a.createElement("input",{type:"file",style:{display:"none"},ref:d,onChange:this.handleChangeFile}))),c.a.createElement(Ot.a,{item:!0,xs:8},c.a.createElement(Ot.a,{container:!0,direction:"column",style:{height:"100%"}},c.a.createElement(Ee.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),c.a.createElement("div",{className:t.form},c.a.createElement(vt.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:t.textField,margin:"normal",name:"surName",value:o,onChange:this.handleChange}),c.a.createElement(vt.a,{label:"\u0418\u043c\u044f",className:t.textField,margin:"normal",name:"firstName",value:r,onChange:this.handleChange}),c.a.createElement(vt.a,{label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",className:t.textField,margin:"normal",name:"middleName",value:i,onChange:this.handleChange})),c.a.createElement(Ee.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041f\u0430\u0440\u043e\u043b\u044c"),c.a.createElement("div",{className:t.form},c.a.createElement(_e,{label:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"oldPassword",value:s,handleChange:this.handleChange}),c.a.createElement(_e,{label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"newPassword",value:l,handleChange:this.handleChange}),c.a.createElement(_e,{label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",className:t.textField,name:"confirmPassword",value:u,handleChange:this.handleChange})),c.a.createElement(pt.a,{className:t.formActions},c.a.createElement(me.a,{color:"primary",variant:"contained",disabled:a,onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),c.a.createElement(me.a,{variant:"outlined",onClick:this.cancelHandler,disabled:a},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"))))))))}}]),t}(r.PureComponent),ia=Object(re.a)(Object(Ve.a)(function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},avatarPreview:{width:"100%",height:"100%",borderRadius:"8px"},avatarPreviewWrapper:{marginBottom:e.spacing(2),width:"100%"},uploadButton:{display:"block",textAlign:"center"},form:{display:"flex",flexWrap:"wrap",marginBottom:e.spacing(3)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},formActions:{marginTop:"auto",padding:0}}}),Object(f.b)(function(e){return{userProfile:U(e),isLoading:M(e)}}))(oa),sa=a(175),la=a.n(sa),ua=function(e){return e.adminPanel.isLoadingUsers},ma=function(e){return e.adminPanel.users},da=Object(E.a)("".concat("ADMIN_PANEL","/SET_IS_LOADING_USERS")),pa=Object(E.a)("".concat("ADMIN_PANEL","/SET_IS_LOADING_FORM")),fa=Object(E.a)("".concat("ADMIN_PANEL","/SET_USERS")),ha=Object(E.a)("".concat("ADMIN_PANEL","/SET_TO_ZERO_USERS")),ba=Object(O.a)(Object(g.a)({},da,function(e,t){return t.payload}),!1),ga=Object(O.a)(Object(g.a)({},pa,function(e,t){return t.payload}),!1),Ea=Object(O.a)((Me={},Object(g.a)(Me,fa,function(e,t){return t.payload}),Object(g.a)(Me,ha,function(){return[]}),Me),[]),Oa=Object(v.c)({isLoadingUsers:ba,isLoadingForm:ga,users:Ea}),va=function(){return function(e,t){e(da(!0)),L({url:"/users",getState:t,dispatch:e}).then(function(t){e(fa(t))}).catch(function(e){return S({text:e.message,variant:"error"})}).finally(function(){return e(da(!1))})}},ja=function(e,t){return function(a,n){return new Promise(function(r){a(pa(!0)),L({url:"/users/".concat(e,"/permission"),method:"PATCH",data:{permission:t},getState:n,dispatch:a}).then(function(){S({text:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e!",variant:"success"}),a(va()),he()(U(n()),"id",null)===e&&a(K()),r(!0)}).catch(function(e){S({text:e.message,variant:"error"})}).finally(function(){return a(pa(!1))})})}},wa=function(e){return function(t,a){return new Promise(function(n){t(pa(!0)),L({url:"/users/".concat(e),method:"DELETE",getState:a,dispatch:t}).then(function(e){t(va()),n(!0)}).catch(function(e){S({text:e.message,variant:"error"})}).finally(function(){return t(pa(!1))})})}},ya=a(396),Na=a(389),xa=a(387),Sa=a(388),Ca=a(400),Ta=function(e){var t=e.handleChange,a=e.values,n=e.label;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ee.a,{variant:"h5",component:"h3",gutterBottom:!0},n),c.a.createElement(xa.a,null,c.a.createElement(Sa.a,{control:c.a.createElement(Ca.a,{checked:a.C,value:"create",onChange:t("C")}),label:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435"}),c.a.createElement(Sa.a,{control:c.a.createElement(Ca.a,{checked:a.R,value:"read",onChange:t("R")}),label:"\u0427\u0442\u0435\u043d\u0438\u0435"}),c.a.createElement(Sa.a,{control:c.a.createElement(Ca.a,{checked:a.U,value:"update",onChange:t("U")}),label:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),c.a.createElement(Sa.a,{control:c.a.createElement(Ca.a,{checked:a.D,value:"delete",onChange:t("D")}),label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"})))};function ka(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Pa(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ka(a,!0).forEach(function(t){Object(g.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ka(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Aa={selectedUserId:"",selectedUser:null,permission:{chat:{C:!0,R:!0,U:!1,D:!1},news:{C:!0,R:!0,U:!1,D:!1},settings:{C:!0,R:!0,U:!1,D:!1}}},Ra=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=Aa,a.handleChange=function(e){return function(t){return function(n){var r=n.target.checked,c=a.state.permission;a.setState({permission:Pa({},c,Object(g.a)({},e,Pa({},c[e],Object(g.a)({},t,r))))})}}},a.handleChangeUser=function(e){var t=a.props.users,n=e.target.value,r=isFinite(n)&&n>=0?la()(t.find(function(e){return e.id===n})):null;a.setState({selectedUserId:n,selectedUser:r,permission:r.permission})},a.submitHandler=function(){var e=a.state,t=e.permission,n=e.selectedUserId;(0,a.props.dispatch)(ja(n,t))},a.cancelHandler=function(){a.state.selectedUserId;a.setState({selectedUserId:null,selectedUser:null,permission:null})},a.deleteHandler=function(){var e=a.state.selectedUserId,t=a.props.dispatch;e&&t(wa(e)).then(function(){return a.setState(Aa)})},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(va())}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=this.state,r=n.selectedUserId,o=n.selectedUser;return c.a.createElement("div",{className:t.wrapper},c.a.createElement(se.a,null,c.a.createElement(ve.a,{className:t.formCard},c.a.createElement(Ot.a,{container:!0,wrap:"nowrap",alignItems:"center",className:t.mb3},c.a.createElement(mt.a,{src:o&&o.image||"/assets/img/no-user-image.png",className:t.userAvatar}),c.a.createElement(je.a,{className:t.userSelect},c.a.createElement(we.a,{htmlFor:"age-simple"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),c.a.createElement(ya.a,{value:r,onChange:this.handleChangeUser},c.a.createElement(Na.a,{value:null},"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"),a.map(function(e){return c.a.createElement(Na.a,{value:e.id,key:e.id},e.username)})))),o&&this.renderForms())))}},{key:"renderForms",value:function(){var e=this.props.classes,t=this.state.permission;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ot.a,{container:!0,spacing:2,className:e.mb3},c.a.createElement(Ot.a,{item:!0,xs:4},c.a.createElement(Ta,{label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",values:t.settings,handleChange:this.handleChange("settings")})),c.a.createElement(Ot.a,{item:!0,xs:4},c.a.createElement(Ta,{label:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",values:t.news,handleChange:this.handleChange("news")})),c.a.createElement(Ot.a,{item:!0,xs:4},c.a.createElement(Ta,{label:"\u0427\u0430\u0442",values:t.chat,handleChange:this.handleChange("chat")}))),c.a.createElement(Ot.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},c.a.createElement(jt.a,null,c.a.createElement(me.a,{variant:"contained",color:"secondary",onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),c.a.createElement(me.a,{variant:"contained",onClick:this.cancelHandler},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),c.a.createElement(me.a,{variant:"contained",onClick:this.deleteHandler},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))}}]),t}(r.PureComponent),_a=Object(re.a)(Object(Ve.a)(function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},userSelect:{width:"100%"},userAvatar:{marginRight:e.spacing(2)},mb3:{marginBottom:e.spacing(3)}}}),Object(f.b)(function(e){return{isLoading:ua(e),users:ma(e)}}))(Ra),Ia=a(2),Da=a(3),La=a(176),Ua=a.n(La),Fa=a(178),Ha=a.n(Fa),Wa=a(179),Ma=a.n(Wa),Ba=a(181),Ga=a.n(Ba),za=a(390),qa=a(391),Va=a(403),Qa=a(392),Xa=a(177),Ja=a.n(Xa),Za=a(180),Ya={success:Ua.a,warning:Ja.a,error:Ha.a,info:Ma.a},Ka=Object(Za.a)(function(e){return{success:{backgroundColor:za.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:qa.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});function $a(e){var t=Ka(),a=e.className,n=e.message,r=e.onClose,o=e.variant,i=Object(Ia.a)(e,["className","message","onClose","variant"]),s=Ya[o];return c.a.createElement(Qa.a,Object.assign({className:Object(Da.a)(t[o],a),"aria-describedby":"client-snackbar",message:c.a.createElement("span",{id:"client-snackbar",className:t.message},c.a.createElement(s,{className:Object(Da.a)(t.icon,t.iconVariant)}),n),action:[c.a.createElement(Ce.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},c.a.createElement(Ga.a,{className:t.icon}))]},i))}var en=function(e){var t={openNotification:S,closeNotification:C};return Object(f.b)(function(e){return{notifications:T(e)}},t)(function(t){var a=t.openNotification,n=t.closeNotification,r=t.notifications,o=Object(Ia.a)(t,["openNotification","closeNotification","notifications"]),i=function(e){return function(t,a){"clickaway"!==a&&n(e)}},s=r.find(function(e){return!!e.isActive});return c.a.createElement(c.a.Fragment,null,c.a.createElement(e,Object.assign({},o,{openNotification:a})),s&&c.a.createElement(Va.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,autoHideDuration:2500,onClose:i(s.id)},c.a.createElement($a,{onClose:i(s.id),variant:s.variant,message:s.text})))})},tn=function(){return{root:{display:"flex",flexDirection:"column",height:"100%",minHeight:"100vh",backgroundColor:"#f5f5f5"},container:{flex:"1 1 100%",display:"flex",flexDirection:"column"},mainLayoutWrapper:{background:'url("/assets/img/another-background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",display:"flex",alignItems:"stretch"}}},an=Object(ce.a)(tn)(function(e){var t=e.children,a=e.classes;return c.a.createElement("div",{className:a.mainLayoutWrapper},t)}),nn=function(e){return en(function(e){return function(t){return c.a.createElement(an,null,c.a.createElement(e,t))}}(e))},rn=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(K())}},{key:"render",value:function(){var e=this.props.classes;return c.a.createElement("div",{className:e.root},c.a.createElement(ge,null),c.a.createElement(oe.a,{className:e.container},c.a.createElement(p.d,null,c.a.createElement(p.b,{path:ae.home,exact:!0,component:en(qe)}),c.a.createElement(p.b,{path:ae.registration,component:en(qe)}),c.a.createElement(ne,{permissionPath:"news",path:ae.news,component:nn(xt)}),c.a.createElement(ne,{permissionPath:"chat",path:ae.chat,component:nn(na)}),c.a.createElement(ne,{path:ae.profile,component:nn(ia)}),c.a.createElement(ne,{permissionPath:"settings",path:ae.adminPanel,component:nn(_a)}))))}}]),t}(r.PureComponent),cn=Object(re.a)(Object(ce.a)(tn),Object(f.b)())(rn),on=a(394),sn=a(393),ln=a(94),un=a(183),mn=Object(un.a)({palette:{primary:{main:"#63c1a0"},secondary:{main:"#19857b"},error:{main:ln.a.A400},background:{default:"rgba(255, 255, 255, .87)"}}}),dn=a(182),pn=Object(v.c)({auth:Y,notifications:k,news:ot,adminPanel:Oa,chat:Qt}),fn=function(){return Object(v.e)(pn,Object(v.d)(Object(v.a)(dn.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}))};i.a.render(c.a.createElement(sn.a,{theme:mn},c.a.createElement(on.a,null),c.a.createElement(f.a,{store:fn()},c.a.createElement(ue.a,null,c.a.createElement(cn,null)))),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.6b43f244.chunk.js.map