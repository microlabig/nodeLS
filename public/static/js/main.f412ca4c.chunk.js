(window["webpackJsonploftschool-nodejs-project"]=window["webpackJsonploftschool-nodejs-project"]||[]).push([[0],{195:function(e,t,a){e.exports=a(331)},249:function(e,t){},331:function(e,t,a){"use strict";a.r(t);var n,r,c,o,i=a(0),s=a.n(i),l=a(11),u=a.n(l),m=a(17),d=a(14),p=a(18),f=a(19),h=a(20),b=a(55),g=a(8),E=a(166),O=a.n(E),v=a(6),j=a(117),w=a(398),y=a(25),N=a(167),x=a.n(N),S=a(21),C=a(397),k=Object(C.a)({OPEN_NOTIFICATION:function(e){return e},CLOSE_NOTIFICATION:function(e){return e}},{prefix:"notifications"}),P=k.openNotification,T=k.closeNotification,A=function(e){return e.notifications},I=Object(w.a)((n={},Object(v.a)(n,P,function(e,t){var a=t.payload,n=a.text,r=a.variant;return[].concat(Object(S.a)(e),[{text:n,variant:r,id:e.length+1,isActive:!e.length}])}),Object(v.a)(n,T,function(e,t){var a=e.filter(function(e){return e.id!==t.payload});return a.length?a.map(function(e,t){return t===a.length-1&&(e.isActive=!0),e}):a}),n),[]),_=window.location.href,D=_&&"/"===_?"".concat(_,":3000/api/"):"http://localhost:3000/api/",R=x.a.create({baseURL:D}),L=[],U=!1,F=function(e){var t=e.url,a=e.method,n=e.data,r=e.headers,c=void 0===r?{}:r,o=e.isRefresh,i=e.isWithoutToken,s=e.getState,l=void 0===s?function(){return{}}:s,u=e.dispatch,m=void 0===u?function(){}:u;return new Promise(function(e,r){var s=M(l()),u=s.accessToken,d=s.accessTokenExpiredAt,p=s.refreshTokenExpiredAt,f=function(e){var t=e.url,a=e.method,n=e.headers,r=e.data,c=e.resolve,s=e.reject;if(!i){var u=M(l()),d=u.accessToken,p=u.refreshToken;n.Authorization=o?p:d}return R({url:t,method:a,headers:n,data:r}).then(function(e){c(e.data)}).catch(function(e){if(!e.response)return m(P({variant:"error",text:"Error!!\n".concat(e.message)})),s(e.message);var a=e.response.status||404,n=e.response.data;switch(console.group("Error from: "+t),console.info("Status: "+a),console.dir(n),console.groupEnd(),a){case 401:case 403:return m(ae()),s(n);case 500:case 502:case 503:return m(P({variant:"error",text:"".concat(a,"!\nSomething is wrong))")})),s({detail:"Unknown error"});default:return s(n)}})},h=d<=Date.now(),b=p<=Date.now();u&&h&&!b&&!i?(!o&&L.push({url:t,method:a,data:n,headers:c,isRefresh:o,resolve:e,reject:r}),o||U?o&&f({url:t,method:a,data:n,headers:c,resolve:e,reject:r}):(U=!0,m(te()).then(function(){U=!1,L.forEach(function(e){return f(e)})}).catch(function(){m(ae()),r({detail:"Refresh token error"})}))):b&&!i?(m(ae()),r({detail:"Refresh token is expired"})):f({url:t,method:a,data:n,headers:c,resolve:e,reject:r})})},H=function(e){return e.auth.userProfile},W=function(e){return e.auth.permissions},M=function(e){return e.auth.tokens},B=function(e){return!!e.auth.tokens.accessToken},G=function(e){return e.auth.isLoadingUserProfile},z=(Object(j.a)("".concat("AUTH","/LOGIN_USER_REQUEST")),Object(j.a)("".concat("AUTH","/REGISTRATION_USER_REQUEST")),Object(j.a)("".concat("AUTH","/SET_PROFILE_DATA"))),q=Object(j.a)("".concat("AUTH","/SET_TOKEN_DATA")),V=Object(j.a)("".concat("AUTH","/LOGOUT_USER")),X=Object(j.a)("".concat("AUTH","/SET_IS_LOADING_USER_PROFILE")),J=Object(w.a)(Object(v.a)({},X,function(e,t){return t.payload}),!1),Z=Object(w.a)((r={},Object(v.a)(r,z,function(e,t){var a=t.payload,n=a.id,r=a.image,c=a.middleName,o=a.surName,i=a.username;return{id:n,image:r,firstName:a.firstName,middleName:c,surName:o,username:i}}),Object(v.a)(r,V,function(){return null}),r),null),Q={chat:{C:!1,D:!1,R:!1,U:!1},news:{C:!1,D:!1,R:!1,U:!1},settings:{C:!1,D:!1,R:!1,U:!1}},Y=Object(w.a)((c={},Object(v.a)(c,z,function(e,t){return t.payload.permission}),Object(v.a)(c,V,function(){return Q}),c),Q),K=Object(w.a)((o={},Object(v.a)(o,q,function(e,t){var a=t.payload;return{accessToken:a.accessToken,accessTokenExpiredAt:a.accessTokenExpiredAt,refreshToken:a.refreshToken,refreshTokenExpiredAt:a.refreshTokenExpiredAt}}),Object(v.a)(o,V,function(){return{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}}),o),{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}),$=Object(y.c)({userProfile:Z,permissions:Y,tokens:K,isLoadingUserProfile:J}),ee=function(){return function(e,t){var a=localStorage.getItem("token-data");a&&(e(q(JSON.parse(a))),F({url:"/profile",method:"GET",dispatch:e,getState:t}).then(function(t){e(z(t))}).catch(function(e){}))}},te=function(){return function(e,t){return new Promise(function(a,n){F({url:"/refresh-token",method:"POST",isRefresh:!0,dispatch:e,getState:t}).then(function(t){e(q(t)),a(a)}).catch(function(e){return n(e)})})}},ae=function(){return function(e){localStorage.removeItem("token-data"),e(V()),P({text:"\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",variant:"info"})}},ne=function(e){var t=e.firstName,a=e.surName,n=e.middleName,r=e.oldPassword,c=e.newPassword,o=e.avatar;return function(e,i){return new Promise(function(s){var l=new FormData;l.append("firstName",t),l.append("surName",a),l.append("middleName",n),l.append("oldPassword",r),l.append("newPassword",c),l.append("avatar",o),e(X(!0)),F({url:"/profile",method:"PATCH",data:l,getState:i,dispatch:e}).then(function(t){e(z(t)),e(P({text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d!",variant:"success"})),s(!0)}).catch(function(t){return e(P({text:t.message,variant:"error"}))}).finally(function(){return e(X(!1))})})}},re={home:"/",registration:"/registration",news:"/news",chat:"/chat",profile:"/profile",adminPanel:"/admin-panel"},ce=Object(g.b)(function(e){return{permissions:W(e),isAuthorized:B(e)}})(function(e){var t=e.permissionPath,a=e.path,n=e.component,r=e.permissions;return!e.isAuthorized||t&&!O.a.get(r,[t,"R"],!1)?s.a.createElement(b.a,{from:a,to:re.home}):s.a.createElement(b.b,{path:a,component:n})}),oe=a(13),ie=a(4),se=a(395),le=a(366),ue=a(367),me=a(368),de=a(27),pe=a(364),fe=s.a.forwardRef(function(e,t){return s.a.createElement(de.b,Object.assign({innerRef:t},e))}),he=Object(b.g)(function(e){var t=e.path,a=e.location,n=e.children,r=e.isRouterLink,c=e.color,o=void 0===c?"primary":c;return s.a.createElement(pe.a,{color:r?a.pathname===t?o:"default":o,component:fe,to:t},n)}),be=a(31),ge=a.n(be),Ee=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"renderAuthorizedNav",value:function(){var e=this.props,t=e.permissions,a=e.profile;return s.a.createElement(s.a.Fragment,null,ge()(t,"news.R",!1)&&s.a.createElement(he,{path:re.news,isRouterLink:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),ge()(t,"chat.R",!1)&&s.a.createElement(he,{path:re.chat,isRouterLink:!0},"\u0427\u0430\u0442"),ge()(t,"settings.R",!1)&&s.a.createElement(he,{path:re.adminPanel,isRouterLink:!0},"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"),s.a.createElement(he,{path:re.profile,isRouterLink:!0},a?a.username:""))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return s.a.createElement("div",null,s.a.createElement(le.a,{position:"static",color:"default",className:t.appBar},s.a.createElement(ue.a,null,s.a.createElement(me.a,null,s.a.createElement("div",{className:t.logo},s.a.createElement("img",{src:"../../assets/img/logo.png",alt:"logo"})),s.a.createElement(he,{path:re.home,isRouterLink:!0},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),a?this.renderAuthorizedNav():null))))}}]),t}(i.PureComponent),Oe=Object(oe.a)(Object(ie.a)(function(){return{logo:{flexGrow:1}}}),Object(g.b)(function(e){return{isAuthorized:B(e),permissions:W(e),profile:H(e)}}))(Ee),ve=a(38),je=a(53),we=a(118),ye=a(369),Ne=a(402),xe=a(370),Se=a(371),Ce=a(372),ke=Object(ie.a)(function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}})(function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,c=e.label,o=e.required;return s.a.createElement(ye.a,{className:a.textField,required:o},s.a.createElement(Ne.a,{htmlFor:"input-"+t},c),s.a.createElement(xe.a,{id:"input-"+t,type:"text",value:r,autoComplete:t,onChange:n,startAdornment:s.a.createElement(Se.a,{position:"start"},s.a.createElement(Ce.a,null))}))}),Pe=a(374),Te=a(373),Ae=a(375),Ie=a(376),_e=a(47),De=a.n(_e),Re=Object(ie.a)(function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}})(function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,c=e.label,o=e.className,i=e.name,l=s.a.useState({showPassword:!1}),u=Object(je.a)(l,2),m=u[0],d=u[1];return s.a.createElement(ye.a,{className:De()(a.textField,o),required:!0},s.a.createElement(Ne.a,{htmlFor:t},c),s.a.createElement(xe.a,{id:t,autoComplete:t,type:m.showPassword?"text":"password",name:i,value:r,onChange:n,startAdornment:s.a.createElement(Se.a,{position:"start"},s.a.createElement(Te.a,null)),endAdornment:s.a.createElement(Se.a,{position:"end"},s.a.createElement(Pe.a,{"aria-label":"toggle password visibility",onClick:function(){d({showPassword:!m.showPassword})},onMouseDown:function(e){e.preventDefault()}},m.showPassword?s.a.createElement(Ae.a,null):s.a.createElement(Ie.a,null)))}))});function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var Ue=Object(oe.a)(Object(ie.a)(function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}}),Object(g.b)())(function(e){var t=e.classes,a=e.dispatch,n=Object(i.useState)({username:"",password:""}),r=Object(je.a)(n,2),c=r[0],o=r[1],l=function(e){return function(t){o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},c,Object(v.a)({},e,t.target.value)))}};return s.a.createElement(s.a.Fragment,null,s.a.createElement(we.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=c.username,n=c.password;a(function(e){var t=e.username,a=e.password;return function(e,n){return new Promise(function(r,c){F({url:"/login",method:"POST",data:{username:t,password:a},isWithoutToken:!0,dispatch:e,getState:n}).then(function(t){e(P({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438!",variant:"success"}));var a=t.accessToken,n=t.accessTokenExpiredAt,c=t.refreshToken,o=t.refreshTokenExpiredAt;localStorage.setItem("token-data",JSON.stringify({accessToken:a,accessTokenExpiredAt:n,refreshToken:c,refreshTokenExpiredAt:o})),e(z(t)),e(q(t)),r(t)}).catch(function(t){e(P({text:t.message,variant:"error"})),c(t)})})}}({username:t,password:n}))}},s.a.createElement(ke,{handleChange:l("username"),value:c.username,id:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),s.a.createElement(Re,{handleChange:l("password"),value:c.password,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),s.a.createElement(pe.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u043e\u0439\u0442\u0438")),s.a.createElement(ve.a,{className:De()(t.textCenter,t.form)},"\u0412\u043f\u0435\u0440\u0432\u044b\u0435 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435? ",s.a.createElement(de.b,{to:re.registration},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))});function Fe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var He,We,Me,Be,Ge,ze=Object(oe.a)(Object(ie.a)(function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}}),Object(g.b)(),b.g)(function(e){var t=e.classes,a=e.dispatch,n=e.history,r=Object(i.useState)({username:"",password:"",repeatPassword:"",firstname:"",lastname:"",patronicname:""}),c=Object(je.a)(r,2),o=c[0],l=c[1],u=function(e){return function(t){l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Fe(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Fe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},o,Object(v.a)({},e,t.target.value)))}};return s.a.createElement(s.a.Fragment,null,s.a.createElement(we.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=o.username,r=o.password,c=o.firstname,i=o.lastname,s=o.patronicname;a(function(e){var t=e.username,a=e.password,n=e.firstname,r=e.lastname,c=e.patronicname;return function(e,o){return new Promise(function(i,s){var l={username:t,surName:r,firstName:n,middleName:c,password:a};F({url:"/registration",data:l,method:"POST",isWithoutToken:!0,dispatch:e,getState:o}).then(function(){e(P({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!",variant:"success"})),i(l)}).catch(function(t){e(P({text:t.message,variant:"error"})),s(t)})})}}({username:t,password:r,firstname:c,lastname:i,patronicname:s})).then(function(){return n.push(re.home)}).catch(console.error)}},s.a.createElement(ke,{id:"username",handleChange:u("username"),value:o.username,label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),s.a.createElement(ke,{id:"lastname",handleChange:u("lastname"),value:o.lastname,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),s.a.createElement(ke,{id:"firstname",handleChange:u("firstname"),value:o.firstname,label:"\u0418\u043c\u044f"}),s.a.createElement(ke,{id:"patronicname",handleChange:u("patronicname"),value:o.patronicname,label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}),s.a.createElement(Re,{id:"password",handleChange:u("password"),value:o.password,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),s.a.createElement(Re,{id:"repeatPassword",handleChange:u("repeatPassword"),value:o.repeatPassword,label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}),s.a.createElement(pe.a,{color:"primary",variant:"contained",type:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),s.a.createElement(ve.a,{className:De()(t.textCenter,t.form)},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",s.a.createElement(de.b,{to:re.home},"\u0412\u043e\u0439\u0442\u0438")))}),qe=Object(oe.a)(Object(ie.a)(function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"}}}),Object(g.b)())(function(e){var t=e.classes,a=e.dispatch;return s.a.createElement(we.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault(),a(ae())}},s.a.createElement(pe.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u044b\u0439\u0442\u0438"))}),Ve=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return s.a.createElement("div",{className:t.wrapper},s.a.createElement(ue.a,null,s.a.createElement(ve.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u0412\u0430\u0448\u0435 \u0443\u044e\u0442\u043d\u043e\u0435",s.a.createElement("br",null),"\u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e"),a?s.a.createElement(qe,null):s.a.createElement(s.a.Fragment,null,s.a.createElement(b.b,{path:"/",exact:!0,component:Ue}),s.a.createElement(b.b,{path:"/registration",component:ze}))))}}]),t}(i.PureComponent),Xe=Object(oe.a)(Object(ie.a)(function(){return{wrapper:{background:'url("/assets/img/background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",paddingTop:"40px"}}}),Object(g.b)(function(e){return{isAuthorized:B(e)}}),b.g)(Ve),Je=a(334),Ze=function(e){return e.news.isLoadingNewsList},Qe=function(e){return e.news.isLoadingNewsForm},Ye=function(e){return e.news.isLoaded},Ke=function(e){return e.news.news},$e=Object(j.a)("".concat("NEWS","/SET_IS_LOADING_NEWS_LIST")),et=Object(j.a)("".concat("NEWS","/SET_IS_LOADING_NEWS_FORM")),tt=Object(j.a)("".concat("NEWS","/SET_NEWS_LIST")),at=Object(j.a)("".concat("NEWS","/APPEND_NEWS")),nt=Object(j.a)("".concat("NEWS","/SET_TO_ZERO_NEWS_LIST")),rt=(Object(j.a)("".concat("NEWS","/SET_IS_LOADED")),Object(w.a)(Object(v.a)({},$e,function(e,t){return t.payload}),!1)),ct=Object(w.a)(Object(v.a)({},et,function(e,t){return t.payload}),!1),ot=Object(w.a)(Object(v.a)({},tt,function(e,t){return!0}),!1),it=Object(w.a)((He={},Object(v.a)(He,tt,function(e,t){return t.payload}),Object(v.a)(He,at,function(e,t){return[t.payload].concat(Object(S.a)(e))}),Object(v.a)(He,nt,function(){return[]}),He),[]),st=Object(y.c)({isLoadingNewsList:rt,isLoadingNewsForm:ct,isLoaded:ot,news:it}),lt=function(e){var t=e.title,a=e.text;return function(e,n){return new Promise(function(r,c){var o={title:t,text:a};e(et(!0)),F({url:"/news",method:"POST",data:o,getState:n,dispatch:e}).then(function(t){e(tt(t)),r(t)}).catch(function(e){c(e)}).finally(function(){return e(et(!1))})})}},ut=function(e){var t=e.id,a=e.title,n=e.text;return function(e,r){return new Promise(function(c,o){var i={title:a,text:n};e(et(!0)),F({url:"/news/".concat(t),method:"PATCH",data:i,getState:r,dispatch:e}).then(function(t){e(tt(t)),c(t)}).catch(function(e){o(e)}).finally(function(){return e(et(!1))})})}},mt=a(377),dt=a(378),pt=a(379),ft=a(380),ht=a(381),bt=function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},card:{marginBottom:e.spacing(2)}}},gt=Object(Je.a)(bt)(function(e){var t=e.classes,a=e.post,n=e.dispatch,r=e.permission,c=!!ge()(r,"news.U",!1),o=!!ge()(r,"news.D",!1);return s.a.createElement(mt.a,{className:t.card},s.a.createElement(dt.a,{avatar:s.a.createElement(pt.a,{"aria-label":"recipe",src:a.user.image||"/assets/img/no-user-image.png",alt:a.user.username}),title:a.title,subheader:a.created_at}),s.a.createElement(ft.a,null,s.a.createElement(ve.a,{variant:"body2",color:"textSecondary",component:"p"},a.text)),s.a.createElement(ht.a,null,c&&s.a.createElement(he,{path:"/news/".concat(a.id,"/edit")},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),o&&s.a.createElement(pe.a,{onClick:function(){n(function(e){var t=e.id;return function(e,a){return new Promise(function(n,r){e($e(!0)),F({url:"/news/".concat(t),method:"DELETE",getState:a,dispatch:e}).then(function(t){e(tt(t)),n(t)}).catch(function(e){r(e)}).finally(function(){return e($e(!1))})})}}({id:a.id}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}),Et=Object(oe.a)(Object(Je.a)(bt),Object(g.b)(function(e){return{permission:W(e)}}))(gt),Ot=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(e,t){Ye(t())||(e($e(!0)),F({url:"/news",method:"GET",getState:t,dispatch:e}).then(function(t){return e(tt(t))}).catch(function(e){return console.log(e)}).finally(function(){return e($e(!1))}))})}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.isLoaded,n=e.news,r=e.permission,c=!!ge()(r,"news.C",!1);return s.a.createElement(s.a.Fragment,null,c&&s.a.createElement(he,{color:"primary",path:"".concat(re.news,"/add")},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),s.a.createElement("div",null,t?s.a.createElement("div",null,"Loading..."):null,a?n.length?n.map(function(e){return s.a.createElement(Et,{post:e,key:e.id})}):s.a.createElement("div",null,"\u041d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"):null))}}]),t}(i.PureComponent),vt=Object(g.b)(function(e){return{isLoading:Ze(e),isLoaded:Ye(e),news:Ke(e),permission:W(e)}},null)(Ot),jt=a(382),wt=a(399),yt=a(384),Nt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",text:"",createdAt:new Date,user:""},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(v.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.title,r=t.text,c=a.props,o=c.history,i=c.dispatch,s=c.match;i(s.params.id?ut({title:n,text:r,id:s.params.id}):lt({title:n,text:r})).then(function(){return o.push(re.news)})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.newsList;if(t.params.id){var n=a.find(function(e){return e.id==t.params.id}),r=n.title,c=n.text,o=n.created_at,i=n.user;this.setState({title:r,text:c,createdAt:o,user:i.username})}}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.title,n=t.text,r=t.createdAt,c=t.user;return s.a.createElement(we.a,{className:e.formCard,component:"form",onSubmit:this.handleSubmit},s.a.createElement(jt.a,{container:!0,spacing:2},s.a.createElement(jt.a,{item:!0,xs:4},s.a.createElement(wt.a,{label:"\u0410\u0432\u0442\u043e\u0440",value:c,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),s.a.createElement(wt.a,{label:"\u0414\u0430\u0442\u0430",value:r,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),s.a.createElement(wt.a,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",value:a,onChange:this.handleChange,className:e.textField,margin:"normal",fullWidth:!0})),s.a.createElement(jt.a,{item:!0,xs:8},s.a.createElement(wt.a,{label:"\u0422\u0435\u043a\u0441\u0442",name:"text",value:n,onChange:this.handleChange,className:e.textField,margin:"normal",multiline:!0,fullWidth:!0,rows:5}),s.a.createElement(yt.a,null,s.a.createElement(pe.a,{variant:"contained",color:"secondary",type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),s.a.createElement(he,{path:"/news",variant:"contained"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))))}}]),t}(i.PureComponent),xt=Object(oe.a)(Object(Je.a)(function(e){return{formCard:{padding:e.spacing(2)},textField:{display:"block",width:"100%"}}}),b.g,Object(g.b)(function(e){return{isLoading:Qe(e),newsList:Ke(e)}},null))(Nt),St=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:e.wrapper},s.a.createElement(ue.a,null,s.a.createElement(ve.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"),s.a.createElement(b.b,{path:"/news",exact:!0,component:vt}),s.a.createElement(b.b,{path:"/news/add",component:xt}),s.a.createElement(b.b,{path:"/news/:id/edit",component:xt})))}}]),t}(i.PureComponent),Ct=Object(Je.a)(function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"}}})(St),kt=a(173),Pt=a.n(kt),Tt=null,At=function(e){return e.chat.users},It=function(e){return e.chat.messages},_t=function(e){return e.chat.selectedRoom},Dt=function(e){return e.chat.messageText},Rt=Object(j.a)("".concat("CHAT","/SET_USERS")),Lt=Object(j.a)("".concat("CHAT","/ADD_USER")),Ut=Object(j.a)("".concat("CHAT","/UPDATE_USER")),Ft=Object(j.a)("".concat("CHAT","/REMOVE_USER")),Ht=Object(j.a)("".concat("CHAT","/ADD_MESSAGE")),Wt=Object(j.a)("".concat("CHAT","/SET_ROOM_HISTORY")),Mt=Object(j.a)("".concat("CHAT","/SET_TO_ZERO_MESSAGES")),Bt=Object(j.a)("".concat("CHAT","/SET_SELECTED_ROOM")),Gt=Object(j.a)("".concat("CHAT","/SET_MESSAGE_TEXT")),zt=Object(j.a)("".concat("CHAT","/RESET_MESSAGE")),qt=Object(w.a)((We={},Object(v.a)(We,Rt,function(e,t){return t.payload}),Object(v.a)(We,Lt,function(e,t){return[t.payload].concat(Object(S.a)(e))}),Object(v.a)(We,Ut,function(e,t){return e.map(function(e){return e.userId===t.payload.userId?t.payload:e})}),Object(v.a)(We,Ft,function(e,t){return e.filter(function(e){return e.socketId!==t.payload})}),We),[]),Vt=Object(w.a)((Me={},Object(v.a)(Me,Ht,function(e,t){return[].concat(Object(S.a)(e),[t.payload])}),Object(v.a)(Me,Wt,function(e,t){return t.payload}),Object(v.a)(Me,Mt,function(){return[]}),Me),[]),Xt=Object(w.a)(Object(v.a)({},Bt,function(e,t){return t.payload}),null),Jt=Object(w.a)((Be={},Object(v.a)(Be,Gt,function(e,t){return t.payload}),Object(v.a)(Be,zt,function(){return""}),Be),""),Zt=Object(y.c)({users:qt,messages:Vt,selectedRoom:Xt,messageText:Jt}),Qt=function(){return function(e,t){var a=t(),n=H(a),r=_t(a),c=Dt(a);Tt.emit("message:add",{senderId:n.id,recipientId:r.recipientId,roomId:r.socketId,text:c}),e(zt())}},Yt=a(385),Kt=a(383),$t=a(332),ea=a(386),ta=Object(oe.a)(Object(Je.a)(function(e){return{column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"}}}),Object(g.b)(function(e){return{users:At(e),selectedRoom:_t(e)}}))(function(e){var t=e.classes,a=e.users,n=e.selectedRoom,r=e.dispatch,c=function(e){r(function(e){var t=e.userId,a=e.socketId;return function(e,n){var r=H(n());e(Mt()),e(Bt({recipientId:t,socketId:a})),Tt.emit("message:history",{recipientId:t,userId:r.id})}}({userId:e.userId,socketId:e.socketId}))};return s.a.createElement(we.a,{className:t.column,square:!0},s.a.createElement(dt.a,{title:s.a.createElement(ve.a,{variant:"h5"},"\u041b\u0438\u0447\u043d\u044b\u0435 \u0447\u0430\u0442\u044b")}),s.a.createElement(Yt.a,null),s.a.createElement(Kt.a,null,a.map(function(e,t){return s.a.createElement($t.a,{button:!0,key:e.userId,selected:e.userId===n&&n.userId,onClick:function(){return c(e)}},s.a.createElement(ea.a,{primary:e.username}))})))}),aa=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){(0,a.props.dispatch)(Gt(e.target.value))},a.handleSubmit=function(e){e.preventDefault(),(0,a.props.dispatch)(Qt())},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.messages,n=e.messageText,r=e.userId,c=e.permission,o=!!ge()(c,"chat.C",!1);return s.a.createElement(s.a.Fragment,null,s.a.createElement(ft.a,{className:t.chatArea},s.a.createElement(jt.a,{container:!0,direction:"column",wrap:"nowrap"},a.map(function(e,a){return s.a.createElement(jt.a,{item:!0,key:a,className:De()(t.messageContainer,e.senderId!==r?t.isMyMessage:t.isAnotherMessage)},s.a.createElement(mt.a,{className:De()(t.message,e.senderId!==r?t.messagePrimary:t.messageSecondary)},e.text))}))),o&&s.a.createElement(ht.a,null,s.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},s.a.createElement(wt.a,{label:"Label",style:{margin:8},fullWidth:!0,margin:"normal",variant:"filled",InputLabelProps:{shrink:!0},value:n,onChange:this.handleChange}),s.a.createElement(pe.a,{variant:"contained",color:"primary",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))}}]),t}(i.PureComponent),na=Object(oe.a)(Object(Je.a)(function(e){return{messageContainer:{marginBottom:e.spacing(2)},message:{padding:e.spacing(1)},messagePrimary:{backgroundColor:e.palette.grey.A700},messageSecondary:{backgroundColor:e.palette.secondary.main},isMyMessage:{alignSelf:"end"},isAnotherMessage:{alignSelf:"flex-end"},chatArea:{height:"100%",overflowY:"scroll"},form:{display:"flex",alignItems:"center",width:"100%"}}}),Object(g.b)(function(e){return{messageText:Dt(e),userId:H(e).id,permission:W(e)}}))(aa),ra=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(function(e,t){var a=H(t());(Tt=Pt()("http://localhost:3030")).emit("users:connect",{userId:a.id,username:a.username}),Tt.on("users:list",function(t){return e(Rt(t))}).on("users:add",function(t){return e(Lt(t))}).on("users:leave",function(a){e(Ft(a));var n=_t(t());n&&n.socketId===a&&e(Bt(null))}).on("message:history",function(t){return e(Wt(t))}).on("message:add",function(t){return e(Ht(t))})})}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)(function(e){Tt&&Tt.disconnect(),e(Rt([])),e(Mt()),e(Bt(null)),e(zt())})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=e.messages,r=e.selectedRoom;return s.a.createElement("div",{className:t.wrapper},s.a.createElement(ue.a,null,s.a.createElement(jt.a,{container:!0,spacing:1},s.a.createElement(jt.a,{item:!0,xs:4},s.a.createElement(ta,{users:a,selected:r})),s.a.createElement(jt.a,{item:!0,xs:8},s.a.createElement(mt.a,{className:t.column,square:!0},r?s.a.createElement(na,{messages:n}):s.a.createElement("div",{className:t.empty},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442"))))))}}]),t}(i.PureComponent),ca=Object(oe.a)(Object(Je.a)(function(e){return{toolbar:e.mixins.toolbar,column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"},wrapper:{width:"100%",flex:"1 1 100%",paddingTop:e.spacing(1)},empty:{padding:e.spacing(3)}}}),Object(g.b)(function(e){return{users:At(e),selectedRoom:_t(e),messages:It(e)}}))(ra),oa=a(174),ia=a.n(oa),sa=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={firstName:"",middleName:"",surName:"",oldPassword:"",newPassword:"",confirmPassword:"",image:"",fileRef:s.a.createRef()},a.cancelHandler=function(){var e=a.props.userProfile;a.setState({firstName:e.firstName,middleName:e.middleName,surName:e.surName,oldPassword:"",newPassword:"",confirmPassword:"",image:e.image})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(v.a)({},n,r))},a.handleChangeFile=function(){var e=a.state.fileRef,t=new FileReader;t.onload=function(e){a.setState({image:e.target.result})},e.current.files[0]&&t.readAsDataURL(e.current.files[0])},a.submitHandler=function(){var e=a.props.dispatch,t=a.state,n=t.firstName,r=t.surName,c=t.middleName,o=t.oldPassword,i=t.newPassword,s=t.fileRef;e(ne({firstName:n,surName:r,middleName:c,oldPassword:o,newPassword:i,avatar:s.current.files[0]||null})).then(function(){a.cancelHandler()})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.userProfile;this.setState({firstName:e.firstName,middleName:e.middleName,surName:e.surName,image:e.image})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isLoading,n=this.state,r=n.firstName,c=n.surName,o=n.middleName,i=n.oldPassword,l=n.newPassword,u=n.confirmPassword,m=n.image,d=n.fileRef;return s.a.createElement("div",{className:t.wrapper},s.a.createElement(ue.a,null,s.a.createElement(we.a,{className:t.formCard},s.a.createElement(jt.a,{container:!0,spacing:2},s.a.createElement(jt.a,{item:!0,xs:4},s.a.createElement(ia.a,{className:t.avatarPreviewWrapper},s.a.createElement(pt.a,{className:t.avatarPreview,src:m||"/assets/img/no-user-image-big.png"})),s.a.createElement(pe.a,{className:t.uploadButton,variant:"contained",component:"label",color:"primary"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",s.a.createElement("input",{type:"file",style:{display:"none"},ref:d,onChange:this.handleChangeFile}))),s.a.createElement(jt.a,{item:!0,xs:8},s.a.createElement(jt.a,{container:!0,direction:"column",style:{height:"100%"}},s.a.createElement(ve.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),s.a.createElement("div",{className:t.form},s.a.createElement(wt.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:t.textField,margin:"normal",name:"surName",value:c,onChange:this.handleChange}),s.a.createElement(wt.a,{label:"\u0418\u043c\u044f",className:t.textField,margin:"normal",name:"firstName",value:r,onChange:this.handleChange}),s.a.createElement(wt.a,{label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",className:t.textField,margin:"normal",name:"middleName",value:o,onChange:this.handleChange})),s.a.createElement(ve.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041f\u0430\u0440\u043e\u043b\u044c"),s.a.createElement("div",{className:t.form},s.a.createElement(Re,{label:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"oldPassword",value:i,handleChange:this.handleChange}),s.a.createElement(Re,{label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"newPassword",value:l,handleChange:this.handleChange}),s.a.createElement(Re,{label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",className:t.textField,name:"confirmPassword",value:u,handleChange:this.handleChange})),s.a.createElement(ht.a,{className:t.formActions},s.a.createElement(pe.a,{color:"primary",variant:"contained",disabled:a,onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),s.a.createElement(pe.a,{variant:"outlined",onClick:this.cancelHandler,disabled:a},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"))))))))}}]),t}(i.PureComponent),la=Object(oe.a)(Object(Je.a)(function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},avatarPreview:{width:"100%",height:"100%",borderRadius:"8px"},avatarPreviewWrapper:{marginBottom:e.spacing(2),width:"100%"},uploadButton:{display:"block",textAlign:"center"},form:{display:"flex",flexWrap:"wrap",marginBottom:e.spacing(3)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},formActions:{marginTop:"auto",padding:0}}}),Object(g.b)(function(e){return{userProfile:H(e),isLoading:G(e)}}))(sa),ua=a(175),ma=a.n(ua),da=function(e){return e.adminPanel.isLoadingUsers},pa=function(e){return e.adminPanel.users},fa=Object(j.a)("".concat("ADMIN_PANEL","/SET_IS_LOADING_USERS")),ha=Object(j.a)("".concat("ADMIN_PANEL","/SET_IS_LOADING_FORM")),ba=Object(j.a)("".concat("ADMIN_PANEL","/SET_USERS")),ga=Object(j.a)("".concat("ADMIN_PANEL","/SET_TO_ZERO_USERS")),Ea=Object(w.a)(Object(v.a)({},fa,function(e,t){return t.payload}),!1),Oa=Object(w.a)(Object(v.a)({},ha,function(e,t){return t.payload}),!1),va=Object(w.a)((Ge={},Object(v.a)(Ge,ba,function(e,t){return t.payload}),Object(v.a)(Ge,ga,function(){return[]}),Ge),[]),ja=Object(y.c)({isLoadingUsers:Ea,isLoadingForm:Oa,users:va}),wa=function(){return function(e,t){e(fa(!0)),F({url:"/users",getState:t,dispatch:e}).then(function(t){e(ba(t))}).catch(function(e){return P({text:e.message,variant:"error"})}).finally(function(){return e(fa(!1))})}},ya=function(e,t){return function(a,n){return new Promise(function(r){a(ha(!0)),F({url:"/users/".concat(e,"/permission"),method:"PATCH",data:{permission:t},getState:n,dispatch:a}).then(function(){P({text:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e!",variant:"success"}),a(wa()),ge()(H(n()),"id",null)===e&&a(ee()),r(!0)}).catch(function(e){P({text:e.message,variant:"error"})}).finally(function(){return a(ha(!1))})})}},Na=function(e){return function(t,a){return new Promise(function(n){t(ha(!0)),F({url:"/users/".concat(e),method:"DELETE",getState:a,dispatch:t}).then(function(e){t(wa()),n(!0)}).catch(function(e){P({text:e.message,variant:"error"})}).finally(function(){return t(ha(!1))})})}},xa=a(396),Sa=a(389),Ca=a(387),ka=a(388),Pa=a(400),Ta=function(e){var t=e.handleChange,a=e.values,n=e.label;return s.a.createElement(s.a.Fragment,null,s.a.createElement(ve.a,{variant:"h5",component:"h3",gutterBottom:!0},n),s.a.createElement(Ca.a,null,s.a.createElement(ka.a,{control:s.a.createElement(Pa.a,{checked:a.C,value:"create",onChange:t("C")}),label:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435"}),s.a.createElement(ka.a,{control:s.a.createElement(Pa.a,{checked:a.R,value:"read",onChange:t("R")}),label:"\u0427\u0442\u0435\u043d\u0438\u0435"}),s.a.createElement(ka.a,{control:s.a.createElement(Pa.a,{checked:a.U,value:"update",onChange:t("U")}),label:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),s.a.createElement(ka.a,{control:s.a.createElement(Pa.a,{checked:a.D,value:"delete",onChange:t("D")}),label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"})))};function Aa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Ia(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Aa(a,!0).forEach(function(t){Object(v.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Aa(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var _a={selectedUserId:"",selectedUser:null,permission:{chat:{C:!0,R:!0,U:!1,D:!1},news:{C:!0,R:!0,U:!1,D:!1},settings:{C:!0,R:!0,U:!1,D:!1}}},Da=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state=_a,a.handleChange=function(e){return function(t){return function(n){var r=n.target.checked,c=a.state.permission;a.setState({permission:Ia({},c,Object(v.a)({},e,Ia({},c[e],Object(v.a)({},t,r))))})}}},a.handleChangeUser=function(e){var t=a.props.users,n=e.target.value,r=isFinite(n)&&n>=0?ma()(t.find(function(e){return e.id===n})):null;a.setState({selectedUserId:n,selectedUser:r,permission:r.permission})},a.submitHandler=function(){var e=a.state,t=e.permission,n=e.selectedUserId;(0,a.props.dispatch)(ya(n,t))},a.cancelHandler=function(){a.state.selectedUserId;a.setState({selectedUserId:null,selectedUser:null,permission:null})},a.deleteHandler=function(){var e=a.state.selectedUserId,t=a.props.dispatch;e&&t(Na(e)).then(function(){return a.setState(_a)})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(wa())}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=this.state,r=n.selectedUserId,c=n.selectedUser;return s.a.createElement("div",{className:t.wrapper},s.a.createElement(ue.a,null,s.a.createElement(we.a,{className:t.formCard},s.a.createElement(jt.a,{container:!0,wrap:"nowrap",alignItems:"center",className:t.mb3},s.a.createElement(pt.a,{src:c&&c.image||"/assets/img/no-user-image.png",className:t.userAvatar}),s.a.createElement(ye.a,{className:t.userSelect},s.a.createElement(Ne.a,{htmlFor:"age-simple"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),s.a.createElement(xa.a,{value:r,onChange:this.handleChangeUser},s.a.createElement(Sa.a,{value:null},"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"),a.map(function(e){return s.a.createElement(Sa.a,{value:e.id,key:e.id},e.username)})))),c&&this.renderForms())))}},{key:"renderForms",value:function(){var e=this.props.classes,t=this.state.permission;return s.a.createElement(s.a.Fragment,null,s.a.createElement(jt.a,{container:!0,spacing:2,className:e.mb3},s.a.createElement(jt.a,{item:!0,xs:4},s.a.createElement(Ta,{label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",values:t.settings,handleChange:this.handleChange("settings")})),s.a.createElement(jt.a,{item:!0,xs:4},s.a.createElement(Ta,{label:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",values:t.news,handleChange:this.handleChange("news")})),s.a.createElement(jt.a,{item:!0,xs:4},s.a.createElement(Ta,{label:"\u0427\u0430\u0442",values:t.chat,handleChange:this.handleChange("chat")}))),s.a.createElement(jt.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},s.a.createElement(yt.a,null,s.a.createElement(pe.a,{variant:"contained",color:"secondary",onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),s.a.createElement(pe.a,{variant:"contained",onClick:this.cancelHandler},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),s.a.createElement(pe.a,{variant:"contained",onClick:this.deleteHandler},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))}}]),t}(i.PureComponent),Ra=Object(oe.a)(Object(Je.a)(function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},userSelect:{width:"100%"},userAvatar:{marginRight:e.spacing(2)},mb3:{marginBottom:e.spacing(3)}}}),Object(g.b)(function(e){return{isLoading:da(e),users:pa(e)}}))(Da),La=a(2),Ua=a(3),Fa=a(176),Ha=a.n(Fa),Wa=a(178),Ma=a.n(Wa),Ba=a(179),Ga=a.n(Ba),za=a(181),qa=a.n(za),Va=a(390),Xa=a(391),Ja=a(403),Za=a(392),Qa=a(177),Ya=a.n(Qa),Ka=a(180),$a={success:Ha.a,warning:Ya.a,error:Ma.a,info:Ga.a},en=Object(Ka.a)(function(e){return{success:{backgroundColor:Va.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:Xa.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}});function tn(e){var t=en(),a=e.className,n=e.message,r=e.onClose,c=e.variant,o=Object(La.a)(e,["className","message","onClose","variant"]),i=$a[c];return s.a.createElement(Za.a,Object.assign({className:Object(Ua.a)(t[c],a),"aria-describedby":"client-snackbar",message:s.a.createElement("span",{id:"client-snackbar",className:t.message},s.a.createElement(i,{className:Object(Ua.a)(t.icon,t.iconVariant)}),n),action:[s.a.createElement(Pe.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},s.a.createElement(qa.a,{className:t.icon}))]},o))}var an=function(e){var t={openNotification:P,closeNotification:T};return Object(g.b)(function(e){return{notifications:A(e)}},t)(function(t){var a=t.openNotification,n=t.closeNotification,r=t.notifications,c=Object(La.a)(t,["openNotification","closeNotification","notifications"]),o=function(e){return function(t,a){"clickaway"!==a&&n(e)}},i=r.find(function(e){return!!e.isActive});return s.a.createElement(s.a.Fragment,null,s.a.createElement(e,Object.assign({},c,{openNotification:a})),i&&s.a.createElement(Ja.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,autoHideDuration:2500,onClose:o(i.id)},s.a.createElement(tn,{onClose:o(i.id),variant:i.variant,message:i.text})))})},nn=function(){return{root:{display:"flex",flexDirection:"column",height:"100%",minHeight:"100vh",backgroundColor:"#f5f5f5"},container:{flex:"1 1 100%",display:"flex",flexDirection:"column"},mainLayoutWrapper:{background:'url("/assets/img/another-background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",display:"flex",alignItems:"stretch"}}},rn=Object(ie.a)(nn)(function(e){var t=e.children,a=e.classes;return s.a.createElement("div",{className:a.mainLayoutWrapper},t)}),cn=function(e){return an(function(e){return function(t){return s.a.createElement(rn,null,s.a.createElement(e,t))}}(e))},on=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(ee())}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("div",{className:e.root},s.a.createElement(Oe,null),s.a.createElement(se.a,{className:e.container},s.a.createElement(b.d,null,s.a.createElement(b.b,{path:re.home,exact:!0,component:an(Xe)}),s.a.createElement(b.b,{path:re.registration,component:an(Xe)}),s.a.createElement(ce,{permissionPath:"news",path:re.news,component:cn(Ct)}),s.a.createElement(ce,{permissionPath:"chat",path:re.chat,component:cn(ca)}),s.a.createElement(ce,{path:re.profile,component:cn(la)}),s.a.createElement(ce,{permissionPath:"settings",path:re.adminPanel,component:cn(Ra)}))))}}]),t}(i.PureComponent),sn=Object(oe.a)(Object(ie.a)(nn),Object(g.b)())(on),ln=a(394),un=a(393),mn=a(94),dn=a(183),pn=Object(dn.a)({palette:{primary:{main:"#63c1a0"},secondary:{main:"#19857b"},error:{main:mn.a.A400},background:{default:"rgba(255, 255, 255, .87)"}}}),fn=a(182),hn=Object(y.c)({auth:$,notifications:I,news:st,adminPanel:ja,chat:Zt}),bn=function(){return Object(y.e)(hn,Object(y.d)(Object(y.a)(fn.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}))};u.a.render(s.a.createElement(un.a,{theme:pn},s.a.createElement(ln.a,null),s.a.createElement(g.a,{store:bn()},s.a.createElement(de.a,null,s.a.createElement(sn,null)))),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.f412ca4c.chunk.js.map